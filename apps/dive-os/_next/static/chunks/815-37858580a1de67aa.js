"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[815],{3815:function(e,t,n){n.d(t,{o:function(){return Y}});var r=n(4051),i=n.n(r),a=n(6902),o={needsKnife:{getRequirementIcon:function(){return"\u2713"},getRequirementName:function(){return"Knife"},diverFulfillsRequirement:function(e){return e.knife},getFailureText:function(){return"Diver requires a knife"}},risksKnife:{getRequirementIcon:function(){return"!"},getRequirementName:function(){return"Knife"},diverFulfillsRequirement:function(e){return e.knife},getFailureText:function(){return"Diver requires a knife"}},needsFlippers:{getRequirementIcon:function(){return"\u2713"},getRequirementName:function(){return"Flippers"},diverFulfillsRequirement:function(e){return e.flippers},getFailureText:function(){return"Diver requires flippers"}},needsSampleContainer:{getRequirementIcon:function(){return"\u2713"},getRequirementName:function(){return"Sample Container"},diverFulfillsRequirement:function(e){return e.sampleContainer},getFailureText:function(){return"Diver requires Sample Container"}},needsPrybar:{getRequirementIcon:function(){return"\u2713"},getRequirementName:function(){return"Prybar"},diverFulfillsRequirement:function(e){return e.prybar},getFailureText:function(){return"Diver requires Prybar"}},needsKey:{getRequirementIcon:function(){return"\u2713"},getRequirementName:function(){return"Key"},diverFulfillsRequirement:function(e){return e.key},getFailureText:function(){return"Diver requires Key"}}};function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}({},{oldCoin:{name:"Old Coin",description:"An old gold coin with a hole through the middle. The writing is too faded to read.",value:30,weight:1},sapphireRing:{name:"Sapphire Ring",description:"A silver ring with an oval-cut sapphire.",value:50,weight:1},magazines:{name:"Fashion Magazines",description:"A stack of fashion magazines, still wrapped in plastic.",value:15,weight:2},electronicSalvage:{name:"Electronics Salvage",description:"Bits and pieces of an old mainframe computer.",value:200,weight:6}},{redCoral:{name:"Red Coral Sample",description:"A research sample of the local red coral",value:100,weight:2},blueCoral:{name:"Blue Coral Sample",description:"A research sample of a strange blue coral",value:150,weight:2},jellyfish:{name:"Jellyfish",description:"A rare jellyfish, bobbing along happily",value:200,weight:3}},{cannedSoup:{name:"Canned Soup",description:"A not-too-expired can of tomato soup.",value:10,weight:1}}),c=function(e){return{eventText:"Should I take a look around?",timeElapsed:0,actions:[{actionText:"Search",requirements:[],generateNextEvent:l}]}},l=function(e){return{eventText:"OK, starting a sweep.",timeElapsed:5,generateNextEvent:m}},v=function(e){return{eventText:"Should I keep looking?",timeElapsed:0,actions:[{actionText:"Search",requirements:[],generateNextEvent:p}]}},p=function(e){return{eventText:"OK, I'll keep looking around.",timeElapsed:5,generateNextEvent:m}},m=function(e){return 6?{eventText:"What's that in the distance?",timeElapsed:5,generateNextEvent:d}:{eventText:"Not much here, but I'll keep looking.",timeElapsed:5,generateNextEvent:m}},d=function(e){return 0==e?{eventText:"I found a box!",timeElapsed:5,generateNextEvent:h}:1==e?{eventText:"I found some interesting coral!",timeElapsed:5,generateNextEvent:f}:e>=4?{eventText:"I see something big in the distance.",timeElapsed:5,generateNextEvent:T}:{eventText:"I found a box!",timeElapsed:5,generateNextEvent:h}},f=function(e){return{eventText:"This coral looks interesting. Should I take a sample?",timeElapsed:0,actions:[{actionText:"Take",requirements:[o.needsSampleContainer],generateNextEvent:g},{actionText:"Don't Bother",requirements:[],generateNextEvent:l}]}},g=function(e){return 5==e?{eventText:"I haven't seen coral like this before. The sample looks great.",timeElapsed:5,salvage:[s.blueCoral],lostEquipment:["sampleContainer"],generateNextEvent:v}:{eventText:"This is a great example of the local coral. The sample looks great.",timeElapsed:5,salvage:[s.redCoral],lostEquipment:["sampleContainer"],generateNextEvent:v}},h=function(e){return{eventText:"The box is rusted shut, should I pry it open?",timeElapsed:0,actions:[{actionText:"Pry!",requirements:[o.risksKnife],generateNextEvent:x},{actionText:"Don't Bother",requirements:[],generateNextEvent:l}]}},x=function(e){return e>=3?{eventText:"I got it open!",timeElapsed:5,generateNextEvent:E}:{eventText:"My knife broke, but I got it open.",timeElapsed:5,lostEquipment:["knife"],generateNextEvent:E}},E=function(e){return e>=3?{eventText:"There were three old coins inside.",timeElapsed:5,salvage:[s.oldCoin,s.oldCoin,s.oldCoin],generateNextEvent:v}:{eventText:"There was a ring inside.",timeElapsed:5,salvage:[s.sapphireRing],generateNextEvent:v}},T=function(e){return{eventText:"It looks like an old fishing trawler. I'll see what I can find.",timeElapsed:5,generateNextEvent:y}},y=function(e){return{eventText:"Where should I search?",timeElapsed:0,actions:[{actionText:"The Cabin",requirements:[],generateNextEvent:w},{actionText:"The Hold",requirements:[],generateNextEvent:S},{actionText:"The Deck",requirements:[],generateNextEvent:k}]}},w=function(e){return{eventText:"There are a few trinkets on the floor.",timeElapsed:5,salvage:[s.oldCoin,s.sapphireRing],generateNextEvent:y}},S=function(e){return{eventText:"There are some metal crates, too heavy to lift.",timeElapsed:5,generateNextEvent:y}},k=function(e){return{eventText:"You don't see much.",timeElapsed:5,generateNextEvent:y}},N=function(e){return{eventText:"I think the only way in is this hatch.",timeElapsed:5,generateNextEvent:q}},q=function(e){return{eventText:"The hatch is rusted shut.",timeElapsed:0,actions:[{actionText:"Pry",requirements:[o.needsPrybar],generateNextEvent:b}]}},b=function(e){return{eventText:"I got it open. In we go!",timeElapsed:5,generateNextEvent:P}},P=function(e){return{eventText:"I think this is the main deck.",timeElapsed:5,generateNextEvent:I}},I=function(e){return{eventText:"There are doors to the mess hall, bunks, rec room, and bridge.",timeElapsed:5,actions:[{actionText:"Mess Hall",requirements:[],generateNextEvent:C},{actionText:"Bunks",requirements:[],generateNextEvent:D},{actionText:"Rec Room",requirements:[],generateNextEvent:Z},{actionText:"Bridge",requirements:[],generateNextEvent:A}]}},C=function(e){return{eventText:"I found some soup in the pantry.",timeElapsed:5,salvage:[s.cannedSoup],generateNextEvent:I}},D=function(e){return e<4?{eventText:"The bunks were pretty thoroughly cleared out before the ship sank.",timeElapsed:5,generateNextEvent:I}:{eventText:"There's a weird jellyfish swimming by",timeElapsed:5,actions:[{actionText:"Catch It!",requirements:[o.needsSampleContainer],generateNextEvent:R},{actionText:"Leave It",requirements:[],generateNextEvent:I}]}},R=function(e){return e<2?{eventText:"It got away.",timeElapsed:5,generateNextEvent:I}:{eventText:"Got it!",timeElapsed:5,salvage:[s.jellyfish],lostEquipment:["sampleContainer"],generateNextEvent:I}},Z=function(e){return e<4?{eventText:"These magazines aren't too soggy I wonder if there's anything else?.",timeElapsed:5,salvage:[s.magazines],generateNextEvent:I}:{eventText:"I found a key to something!",timeElapsed:5,gainedEquipment:["key"],generateNextEvent:I}},A=function(e){return{eventText:"The door to the bridge is locked.",timeElapsed:5,actions:[{actionText:"Open Door",requirements:[o.needsKey],generateNextEvent:L},{actionText:"Go Back",requirements:[],generateNextEvent:I}]}},L=function(e){return{eventText:"Its been picked clean. Might be something behind the instrument panels?",timeElapsed:5,actions:[{actionText:"Pry",requirements:[o.needsPrybar],generateNextEvent:F},{actionText:"Don't Bother",requirements:[],generateNextEvent:I}]}},F=function(e){return{eventText:"Nice. Most of a navigation computer, mostly intact.",timeElapsed:10,salvage:[s.electronicSalvage],generateNextEvent:M}},M=function(e){return{eventText:"Not much else, I'll head back down to the main deck.",timeElapsed:5,generateNextEvent:I}},O={coralReefDiveSite:{name:"Coral Reef",startingDepth:20,revealed:!1,generateStartingEvent:function(e){return{eventText:"Look, there's a reef!",timeElapsed:5,generateNextEvent:c}}},shipwreck:{name:"Shipwreck",startingDepth:60,revealed:!1,generateStartingEvent:function(e){return{eventText:"I see the shipwreck, it's not too far away.",timeElapsed:5,generateNextEvent:N}}}},K={ports:[],diveSites:[],shops:[]},j={"sector-gz-34":{name:"Sector GZ-34",grid:[[K,K,K,K,{ports:[],diveSites:[O.coralReefDiveSite],shops:[]},K],[K,K,{ports:[],diveSites:[],shops:[{name:"Test Shop"}]},K,K,K],[K,K,K,K,K,K],[K,K,K,K,K,K],[K,{ports:[],diveSites:[O.shipwreck],shops:[]},K,K,K,K],[K,K,K,K,K,K]]}},B=n(2902);function V(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){V(a,r,i,o,u,"next",e)}function u(e){V(a,r,i,o,u,"throw",e)}o(void 0)}))}}var W=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Y=(0,a.ZP)((function(e,t){return{currentView:"Map",setCurrentView:function(t){e((function(e){return{currentView:t}}))},currentTime:0,targetTime:0,advanceCurrentTime:function(n){return new Promise(function(){var r=z(i().mark((function r(a){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e((function(e){return{targetTime:e.currentTime+n}}));case 1:if(!(t().currentTime<t().targetTime)){r.next=7;break}return r.next=4,W(t().diverDown?350:10);case 4:e((0,B.ZP)((function(e){e.currentTime+=1,e.diverDown&&(e.remainingAir-=1)}))),r.next=1;break;case 7:a();case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},actionInProgress:!1,shipXCoord:1,shipYCoord:4,docked:!1,diverDown:!1,currentDiveSite:null,moveShip:function(){var n=z(i().mark((function n(r,a){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((function(e){return{actionInProgress:!0}})),n.next=3,t().advanceCurrentTime(60);case 3:e((function(e){return{actionInProgress:!1,shipXCoord:e.shipXCoord+r,shipYCoord:e.shipYCoord+a}}));case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),dock:z(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((function(e){return{actionInProgress:!0}})),n.next=3,t().advanceCurrentTime(60);case 3:e((function(e){return{actionInProgress:!1,docked:!0}}));case 4:case"end":return n.stop()}}),n)}))),undock:z(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((function(e){return{actionInProgress:!0}})),n.next=3,t().advanceCurrentTime(60);case 3:e((function(e){return{actionInProgress:!1,docked:!1}}));case 4:case"end":return n.stop()}}),n)}))),startDive:function(){var n=z(i().mark((function n(r){var a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((function(e){return{actionInProgress:!0}})),n.next=3,t().advanceCurrentTime(60);case 3:return e((0,B.ZP)((function(e){e.currentView="Dive Site",e.actionInProgress=!1,e.diverDown=!0,e.currentDiveSite=r,e.remainingAir=e.maximumAir}))),a=Math.floor(6*Math.random()),n.next=7,t().handleDiveSiteEvent(r.generateStartingEvent(a));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),ascend:z(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((function(e){return{actionInProgress:!0}})),n.next=3,t().advanceCurrentTime(t().diveAscendTime);case 3:e((function(e){return{actionInProgress:!1,diverDown:!1,currentView:"Dive Results"}}));case 4:case"end":return n.stop()}}),n)}))),endDive:z(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e((function(e){return{currentDiveSite:null,currentView:"Map",shipSalvage:e.shipSalvage.concat(e.diverSalvage),diverSalvage:[],currentWeight:0}}));case 1:case"end":return t.stop()}}),t)}))),openShop:function(){var n=z(i().mark((function n(r){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((function(e){return{actionInProgress:!0}})),n.next=3,t().advanceCurrentTime(30);case 3:e((0,B.ZP)((function(e){e.currentView="Shop",e.actionInProgress=!1,e.currentShop=r})));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),closeShop:z(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((function(e){return{actionInProgress:!0}})),n.next=3,t().advanceCurrentTime(30);case 3:e((0,B.ZP)((function(e){e.currentView="Map",e.actionInProgress=!1,e.currentShop=null})));case 4:case"end":return n.stop()}}),n)}))),sonarScan:z(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e((function(e){return{actionInProgress:!0}})),n.next=3,t().advanceCurrentTime(60);case 3:e((0,B.ZP)((function(e){var t;e.currentSector.grid[e.shipYCoord][e.shipXCoord].diveSites=null===(t=e.currentSector.grid[e.shipYCoord][e.shipXCoord].diveSites)||void 0===t?void 0:t.map((function(e){return e.startingDepth<=999&&(e.revealed=!0),e})),e.actionInProgress=!1})));case 4:case"end":return n.stop()}}),n)}))),currentShop:null,currentSector:j["sector-gz-34"],availableActions:[],diveAscendTime:0,remainingAir:5,maximumAir:60,currentWeight:0,maximumWeight:10,money:60,diverEquipment:{knife:!0,flashlight:!1,key:!1,bait:!1,glowsticks:!1,flippers:!1,sampleContainer:!0,prybar:!0},diverSalvage:[],shipSalvage:[s.redCoral],diveSiteLog:[],diveSiteLogTimestamps:[],handleDiveSiteEvent:function(){var n=z(i().mark((function n(r){var a,o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=200,e((0,B.ZP)((function(e){e.actionInProgress=!0,e.diveSiteLog.push(r.eventText),e.diveSiteLogTimestamps.push(e.currentTime),e.diveSiteLog.length>5&&(e.diveSiteLog=e.diveSiteLog.slice(-5),e.diveSiteLogTimestamps=e.diveSiteLogTimestamps.slice(-5))}))),n.next=4,W(a);case 4:if(!r.lostEquipment){n.next=8;break}return e((0,B.ZP)((function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=r.lostEquipment[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var u=a.value;e.diverEquipment[u]=!1}}catch(s){n=!0,i=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}))),n.next=8,W(a);case 8:if(!r.gainedEquipment){n.next=12;break}return e((0,B.ZP)((function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=r.gainedEquipment[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var u=a.value;e.diverEquipment[u]=!1}}catch(s){n=!0,i=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}))),n.next=12,W(a);case 12:if(!r.salvage){n.next=16;break}return e((0,B.ZP)((function(e){var t=!0,n=!1,i=void 0;try{for(var a,o=r.salvage[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var u=a.value;e.diverSalvage.push(u),e.currentWeight+=u.weight}}catch(s){n=!0,i=s}finally{try{t||null==o.return||o.return()}finally{if(n)throw i}}}))),n.next=16,W(a);case 16:return n.next=18,t().advanceCurrentTime(r.timeElapsed);case 18:t().remainingAir<=0?e((0,B.ZP)((function(e){e.actionInProgress=!1,e.diveSiteLog.push("I'm low on air, i'd better ascend"),e.diveSiteLogTimestamps.push(e.currentTime),e.diveSiteLog.length>5&&(e.diveSiteLog=e.diveSiteLog.slice(-5),e.diveSiteLogTimestamps=e.diveSiteLogTimestamps.slice(-5)),e.availableActions=[]}))):r.actions?e((0,B.ZP)((function(e){e.availableActions=r.actions,e.actionInProgress=!1}))):r.generateNextEvent&&(o=Math.floor(6*Math.random()),t().handleDiveSiteEvent(r.generateNextEvent(o)));case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),handleDiveSitePromptAction:function(){var n=z(i().mark((function n(r){var a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e((0,B.ZP)((function(e){e.availableActions=[],e.actionInProgress=!0}))),a=Math.floor(6*Math.random()),t().handleDiveSiteEvent(r.generateNextEvent(a));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),purchaseDiverEquipment:function(n){n.bait&&t().money>=5&&e((0,B.ZP)((function(e){e.diverEquipment.bait=!0,e.money-=5}))),n.flashlight&&t().money>=10&&e((0,B.ZP)((function(e){e.diverEquipment.flashlight=!0,e.money-=10}))),n.flippers&&t().money>=25&&e((0,B.ZP)((function(e){e.diverEquipment.flippers=!0,e.money-=25}))),n.glowsticks&&t().money>=5&&e((0,B.ZP)((function(e){e.diverEquipment.glowsticks=!0,e.money-=5}))),n.sampleContainer&&t().money>=20&&e((0,B.ZP)((function(e){e.diverEquipment.sampleContainer=!0,e.money-=20}))),n.knife&&t().money>=20&&e((0,B.ZP)((function(e){e.diverEquipment.knife=!0,e.money-=20}))),n.prybar&&t().money>=15&&e((0,B.ZP)((function(e){e.diverEquipment.prybar=!0,e.money-=15})))},sellSalvage:function(t){e((0,B.ZP)((function(e){e.money+=e.shipSalvage[t].value,e.shipSalvage.splice(t,1)})))}}}))}}]);